{% extends 'main.html' %}
{% load static %}

{% block content %}

<!-- Link to external Leaderboard page CSS -->
<link rel="stylesheet" href="{% static 'styles/leaderboard.css' %}">

<section class="leaderboard-main" style="padding-top: 120px;">
    <div class="container">
        {% if contributors %}
            <!-- Top 3 Podium -->
            {% if contributors|length >= 3 %}
            <div class="podium-section">
                <h2 class="podium-title">üåü Top Contributors</h2>
                <div class="podium-container">
                    <!-- 2nd Place -->
                    <div class="podium-card podium-second">
                        <div class="podium-rank">2</div>
                        <div class="podium-icon">ü•à</div>
                        <div class="podium-info">
                            <h3>{{ contributors.1.user.get_full_name|default:contributors.1.user.username }}</h3>
                            <p class="podium-count">{{ contributors.1.word_count }} words</p>
                        </div>
                    </div>

                    <!-- 1st Place -->
                    <div class="podium-card podium-first">
                        <div class="podium-crown">üëë</div>
                        <div class="podium-rank">1</div>
                        <div class="podium-icon">ü•á</div>
                        <div class="podium-info">
                            <h3>{{ contributors.0.user.get_full_name|default:contributors.0.user.username }}</h3>
                            <p class="podium-count">{{ contributors.0.word_count }} words</p>
                        </div>
                    </div>

                    <!-- 3rd Place -->
                    <div class="podium-card podium-third">
                        <div class="podium-rank">3</div>
                        <div class="podium-icon">ü•â</div>
                        <div class="podium-info">
                            <h3>{{ contributors.2.user.get_full_name|default:contributors.2.user.username }}</h3>
                            <p class="podium-count">{{ contributors.2.word_count }} words</p>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Full Leaderboard Table -->
            <div class="leaderboard-table-section">
                <div class="table-header">
                    <h2>All Contributors</h2>
                    <div class="contributor-count">
                        <i class="fas fa-users"></i>
                        <span>{{ contributors|length }} Contributors</span>
                    </div>
                </div>

                <div class="leaderboard-table-container">
                    <table class="leaderboard-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Contributor</th>
                                <th>Contributions</th>
                                <th>Badge</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for contributor in contributors %}
                            <tr class="contributor-row {% if forloop.counter <= 3 %}top-three{% endif %}">
                                <td class="rank-cell">
                                    <span class="rank-number {% if forloop.counter <= 3 %}rank-highlight{% endif %}">
                                        #{{ forloop.counter }}
                                    </span>
                                </td>
                                <td class="contributor-cell">
                                    <div class="contributor-info">
                                        <div class="contributor-avatar">
                                            {{ contributor.user.get_full_name.0|default:contributor.user.username.0|upper }}
                                        </div>
                                        <span class="contributor-name">{{ contributor.user.get_full_name|default:contributor.user.username }}</span>
                                    </div>
                                </td>
                                <td class="count-cell">
                                    <span class="count-badge">{{ contributor.word_count }}</span>
                                    <span class="count-label">words</span>
                                </td>
                                <td class="badge-cell">
                                    {% if forloop.counter == 1 %}
                                        <span class="achievement-badge gold">üèÜ Champion</span>
                                    {% elif forloop.counter == 2 %}
                                        <span class="achievement-badge silver">‚≠ê Expert</span>
                                    {% elif forloop.counter == 3 %}
                                        <span class="achievement-badge bronze">üåü Pro</span>
                                    {% elif contributor.word_count >= 50 %}
                                        <span class="achievement-badge green">‚ú® Active</span>
                                    {% elif contributor.word_count >= 10 %}
                                        <span class="achievement-badge blue">üí´ Rising</span>
                                    {% else %}
                                        <span class="achievement-badge gray">üå± Starter</span>
                                    {% endif %}
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>

        {% else %}
            <!-- Empty State -->
            <div class="empty-state">
                <div class="empty-icon">üéØ</div>
                <h2>No Contributors Yet</h2>
                <p>Be the first to contribute to the Igalapedia dictionary and appear on the leaderboard!</p>
                <a href="{% url 'submit_word' %}" class="primary-button">Submit a Word</a>
            </div>
        {% endif %}

        <!-- Call to Action -->
        <div class="leaderboard-cta">
            <div class="cta-card">
                <div class="cta-icon">üöÄ</div>
                <div class="cta-content">
                    <h3>Want to see your name here?</h3>
                    <p>Join our community of contributors and help preserve the Igala language!</p>
                    <div class="cta-buttons">
                        <a href="{% url 'submit_word' %}" class="primary-button">
                            Submit a Word
                        </a>
                        <a href="{% url 'about' %}" class="secondary-button">
                            Learn More
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

{% include "footer.html" %}

{% endblock content %}
